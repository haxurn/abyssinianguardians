"use client"
import { motion } from "framer-motion"
import { Line, LineChart, XAxis, YAxis, CartesianGrid, ResponsiveContainer } from "recharts"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { ChartContainer, ChartTooltip, ChartTooltipContent } from "@/components/ui/chart"
import { VULNERABILITY_TREND_DATA } from "@/constants/dashboard-data"

export function VulnerabilityChart() {
  return (
    <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} transition={{ duration: 0.5 }}>
      <Card className="hover:shadow-lg transition-shadow duration-300 bg-gradient-to-br from-slate-900/50 to-slate-800/50 border-slate-700/50">
        <CardHeader>
          <CardTitle className="flex items-center gap-2 text-slate-100">
            Weekly Vulnerability Trends
            <div className="ml-auto flex items-center gap-2">
              <div className="flex items-center gap-1">
                <div className="w-3 h-3 rounded-full bg-cyan-400" />
                <span className="text-xs text-slate-400">Total</span>
              </div>
              <div className="flex items-center gap-1">
                <div className="w-3 h-3 rounded-full bg-rose-400" />
                <span className="text-xs text-slate-400">Critical</span>
              </div>
            </div>
          </CardTitle>
        </CardHeader>
        <CardContent>
          <ChartContainer
            config={{
              total: {
                label: "Total Vulnerabilities",
                color: "hsl(186, 100%, 69%)",
              },
              critical: {
                label: "Critical",
                color: "hsl(351, 95%, 71%)",
              },
            }}
            className="h-[300px]"
          >
            <ResponsiveContainer width="100%" height="100%">
              <LineChart data={VULNERABILITY_TREND_DATA} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>
                <CartesianGrid strokeDasharray="3 3" stroke="hsl(215, 28%, 17%)" />
                <XAxis
                  dataKey="date"
                  tick={{ fill: "hsl(215, 20%, 65%)", fontSize: 12 }}
                  axisLine={{ stroke: "hsl(215, 28%, 17%)" }}
                />
                <YAxis
                  tick={{ fill: "hsl(215, 20%, 65%)", fontSize: 12 }}
                  axisLine={{ stroke: "hsl(215, 28%, 17%)" }}
                />
                <ChartTooltip content={<ChartTooltipContent />} />
                <Line
                  type="monotone"
                  dataKey="total"
                  stroke="var(--color-total)"
                  strokeWidth={3}
                  dot={{ fill: "var(--color-total)", strokeWidth: 2, r: 4 }}
                  activeDot={{ r: 6, stroke: "var(--color-total)", strokeWidth: 2 }}
                />
                <Line
                  type="monotone"
                  dataKey="critical"
                  stroke="var(--color-critical)"
                  strokeWidth={2}
                  dot={{ fill: "var(--color-critical)", strokeWidth: 2, r: 3 }}
                  activeDot={{ r: 5, stroke: "var(--color-critical)", strokeWidth: 2 }}
                />
              </LineChart>
            </ResponsiveContainer>
          </ChartContainer>
        </CardContent>
      </Card>
    </motion.div>
  )
}
